{"version":3,"sources":["../src/app.js"],"names":["Ariel","setListeners","screen","document","querySelector","message","input","microphone","container","selfie","window","addEventListener","event","preventDefault","target","style","cssText","getSpeech","keyCode","which","sendMessage","value","speechBubbles","querySelectorAll","recognition","webkitSpeechRecognition","onresult","results","sendSpeech","start","msg","listNode","li","createElement","appendChild","createTextNode","json","JSON","stringify","console","log","xhr","XMLHttpRequest","url","open","setRequestHeader","onreadystatechange","readyState","status","responseText","send","ariel"],"mappings":"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","file":"app.js","sourcesContent":["class Ariel {\n  constructor() {\n    this.setListeners();\n  }\n  setListeners() {\n  \tconst screen = document.querySelector('.screen');\n    const message = document.querySelector('.message');\n    const input = document.querySelector('.message__input');\n    const microphone = document.querySelector('.message__speech');\n    const container = document.querySelector('.screen__container--listen');\n\n    let selfie = this;\n\n    window.addEventListener('touchstart', (event) => {\n      event.preventDefault();\n\n      if (event.target === microphone) {\n      \tscreen.style.cssText = 'background: linear-gradient(#1EC7AC, #3AB8C8)';\n        container.style.cssText = 'display: table';\n        selfie.getSpeech();\n      }\n    });\n\n    window.addEventListener('touchend', (event) => {\n      event.preventDefault();\n\n      if (event.target === microphone) {\n      \tscreen.style.cssText = 'background: #EBEDF1';\n        container.style.cssText = 'display: none';\n      }\n    });\n\n    window.addEventListener('keyup', function(event){\n  \t\tevent.preventDefault();\n\n  \t\tif(event.keyCode === 13 || event.which === 13) {\n  \t\t\tselfie.sendMessage(input.value);\n  \t\t\tinput.value = '';\n  \t\t}\n  \t});\n  }\n\n  getSpeech() {\n    const speechBubbles = document.querySelectorAll('.screen__container--listen > span');\n\n    speechBubbles[0].style.cssText = 'animation: sound-1 1.4s infinite';\n    speechBubbles[1].style.cssText = 'animation: sound-2 1.4s infinite';\n    speechBubbles[2].style.cssText = 'animation: sound-1 1.4s infinite';\n    speechBubbles[3].style.cssText = 'animation: sound-2 1.4s infinite';\n\n    let recognition = new webkitSpeechRecognition(),\n    \t\tselfie = this;\n    recognition.onresult = function(event) {\n    \tselfie.sendMessage(event.results[0][0]['transcript']);\n      selfie.sendSpeech(event.results[0][0]['transcript']);\n    }\n    recognition.start();\n\n  }\n  sendMessage(msg) {\n  \tconst listNode = document.querySelector('.screen__container--messages');\n  \tconst li = document.createElement(\"li\");\n\n  \tli.appendChild(document.createTextNode(msg));\n\n  \tlistNode.appendChild(li);\n  }\n  sendSpeech(msg) {\n    const json = JSON.stringify({ \"response\":  msg });\n    console.log(json);\n\n    let xhr = new XMLHttpRequest(),\n      url = 'https://10.1.1.142:5000/';\n\n    xhr.open('POST', url, true);\n\n    xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        console.log(xhr.responseText);\n      }\n    }\n\n    xhr.send(json);\n  }\n}\n\n\n(function() {\n  var ariel = new Ariel;\n})();\n"]}